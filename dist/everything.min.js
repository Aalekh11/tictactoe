angular.module("myApp",[]).factory("gameLogic",function(){"use strict";function a(){return[["","",""],["","",""],["","",""]]}function b(a){var b,c;for(b=0;3>b;b++)for(c=0;3>c;c++)if(""===a[b][c])return!1;return!0}function c(a){var b,c,d="";for(b=0;3>b;b++)for(c=0;3>c;c++){var e=a[b][c];d+=""===e?" ":e}var f=["XXX......","...XXX...","......XXX","X..X..X..",".X..X..X.","..X..X..X","X...X...X","..X.X.X.."];for(b=0;b<f.length;b++){var g=f[b],h=new RegExp(g),i=new RegExp(g.replace(/X/g,"O"));if(h.test(d))return"X";if(i.test(d))return"O"}return""}function d(a,b){var c,d,f=[];for(c=0;3>c;c++)for(d=0;3>d;d++)try{f.push(e(a,c,d,b))}catch(g){}return f}function e(d,e,f,g){if(void 0===d&&(d=a()),""!==d[e][f])throw new Error("One can only make a move in an empty position!");if(""!==c(d)||b(d))throw new Error("Can only make a move if the game is not over!");var h=angular.copy(d);h[e][f]=0===g?"X":"O";var i,j=c(h);return i=""!==j||b(h)?{endMatch:{endMatchScores:"X"===j?[1,0]:"O"===j?[0,1]:[0,0]}}:{setTurn:{turnIndex:1-g}},[i,{set:{key:"board",value:h}},{set:{key:"delta",value:{row:e,col:f}}}]}function f(a){var b=a.move,c=a.turnIndexBeforeMove,d=a.stateBeforeMove;try{var f=b[2].set.value,g=f.row,h=f.col,i=d.board,j=e(i,g,h,c);if(!angular.equals(b,j))return!1}catch(k){return!1}return!0}return{getInitialBoard:a,getPossibleMoves:d,createMove:e,isMoveOk:f}}),angular.module("myApp").controller("Ctrl",["$rootScope","$scope","$log","$timeout","gameService","stateService","gameLogic","aiService","resizeGameAreaService","$translate",function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(){a.$apply(function(){c.info("Animation ended"),n=!0,p&&l()})}function l(){e.makeMove(h.createComputerMove(q.board,r,{millisecondsLimit:1e3}))}function m(a){n=!1,q=a.stateAfterMove,void 0===q.board&&(q.board=g.getInitialBoard()),o=a.turnIndexAfterMove>=0&&a.yourPlayerIndex===a.turnIndexAfterMove,r=a.turnIndexAfterMove,p=o&&""===a.playersInfo[a.yourPlayerIndex].playerId,p&&(o=!1,void 0===q.delta&&l())}console.log("Translation of 'TICTACTOE_GAME' is "+j("TICTACTOE_GAME")),i.setWidthToHeight(1);var n=!1,o=!1,p=!1,q=null,r=null;document.addEventListener("animationend",k,!1),document.addEventListener("webkitAnimationEnd",k,!1),document.addEventListener("oanimationend",k,!1),window.e2e_test_stateService=f,b.cellClicked=function(a,b){if(c.info(["Clicked on cell:",a,b]),"?throwException"===window.location.search)throw new Error("Throwing the error because URL has '?throwException'");if(o)try{var d=g.createMove(q.board,a,b,r);o=!1,e.makeMove(d)}catch(f){return void c.info(["Cell is already full in position:",a,b])}},b.shouldShowImage=function(a,b){var c=q.board[a][b];return""!==c},b.isPieceX=function(a,b){return"X"===q.board[a][b]},b.isPieceO=function(a,b){return"O"===q.board[a][b]},b.shouldSlowlyAppear=function(a,b){return!n&&void 0!==q.delta&&q.delta.row===a&&q.delta.col===b},e.setGame({gameDeveloperEmail:"yoav.zibin@gmail.com",minNumberOfPlayers:2,maxNumberOfPlayers:2,isMoveOk:g.isMoveOk,updateUI:m})}]),angular.module("myApp").factory("aiService",["alphaBetaService","gameLogic",function(a,b){"use strict";function c(b,c,g){return a.alphaBetaDecision([null,{set:{key:"board",value:b}}],c,e,d,"?debug"===window.location.search?f:null,g)}function d(a){if(a[0].endMatch){var b=a[0].endMatch.endMatchScores;return b[0]>b[1]?Number.POSITIVE_INFINITY:b[0]<b[1]?Number.NEGATIVE_INFINITY:0}return 0}function e(a,c){return b.getPossibleMoves(a[1].set.value,c)}function f(a){return"\n"+a[1].set.value.join("\n")+"\n"}return{createComputerMove:c}}]);
//# sourceMappingURL=everything.min.js.map