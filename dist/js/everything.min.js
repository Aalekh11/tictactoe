var gameLogic;!function(a){function b(){for(var b=[],c=0;c<a.ROWS;c++){b[c]=[];for(var d=0;d<a.COLS;d++)b[c][d]=""}return b}function c(){return{board:b(),delta:null}}function d(b){for(var c=0;c<a.ROWS;c++)for(var d=0;d<a.COLS;d++)if(""===b[c][d])return!1;return!0}function e(b){for(var c="",d=0;d<a.ROWS;d++)for(var e=0;e<a.COLS;e++){var f=b[d][e];c+=""===f?" ":f}for(var g=["XXX......","...XXX...","......XXX","X..X..X..",".X..X..X.","..X..X..X","X...X...X","..X.X.X.."],h=0;h<g.length;h++){var i=g[h],j=new RegExp(i),k=new RegExp(i.replace(/X/g,"O"));if(j.test(c))return"X";if(k.test(c))return"O"}return""}function f(a,b,f,g){a||(a=c());var h=a.board;if(""!==h[b][f])throw new Error("One can only make a move in an empty position!");if(""!==e(h)||d(h))throw new Error("Can only make a move if the game is not over!");var i=angular.copy(h);i[b][f]=0===g?"X":"O";var j,k,l=e(i);""!==l||d(i)?(k=-1,j="X"===l?[1,0]:"O"===l?[0,1]:[0,0]):(k=1-g,j=null);var m={row:b,col:f},n={delta:m,board:i};return{endMatchScores:j,turnIndexAfterMove:k,stateAfterMove:n}}function g(){return{endMatchScores:null,turnIndexAfterMove:0,stateAfterMove:c()}}function h(a){var b=a.turnIndexBeforeMove,c=a.stateBeforeMove,d=a.move;if(c||0!==b||!angular.equals(g(),d)){var e=d.stateAfterMove.delta,h=e.row,i=e.col,j=f(c,h,i,b);if(!angular.equals(d,j))throw new Error("Expected move="+angular.toJson(j,!0)+", but got stateTransition="+angular.toJson(a,!0))}}function i(){var b=a.createMove(null,0,0,0);log.log("move=",b);var c={turnIndexBeforeMove:0,stateBeforeMove:null,move:b,numberOfPlayers:2};a.checkMoveOk(c)}a.ROWS=3,a.COLS=3,a.getInitialState=c,a.createMove=f,a.createInitialMove=g,a.checkMoveOk=h,a.forSimpleTestHtml=i}(gameLogic||(gameLogic={}));var game;!function(a){function b(){c(),translate.setTranslations(d()),translate.setLanguage("en"),log.log("Translation of 'TICTACTOE_RULES_TITLE' is "+translate("TICTACTOE_RULES_TITLE")),resizeGameAreaService.setWidthToHeight(1),moveService.setGame({minNumberOfPlayers:2,maxNumberOfPlayers:2,checkMoveOk:gameLogic.checkMoveOk,updateUI:e,gotMessageFromPlatform:null})}function c(){if("serviceWorker"in navigator){var a=navigator;log.log("Calling serviceWorker.register"),a.serviceWorker.register("service-worker.js").then(function(a){log.log("ServiceWorker registration successful with scope: ",a.scope)})["catch"](function(a){log.log("ServiceWorker registration failed: ",a)})}}function d(){return{TICTACTOE_RULES_TITLE:{en:"Rules of TicTacToe",iw:"חוקי המשחק",pt:"Regras de Jogo da Velha",zh:"井字游戏规则",el:"Κανόνες TicTacToe",fr:"Règles de TicTacToe",hi:"TicTacToe के नियम",es:"Reglas de TicTacToe"},TICTACTOE_RULES_SLIDE1:{en:"You and your opponent take turns to mark the grid in an empty spot. The first mark is X, then O, then X, then O, etc.",iw:"אתה והיריב מסמנים איקס או עיגול כל תור",pt:"Você e seu oponente se revezam para marcar a grade em um local vazio. A primeira marca é X, em seguida, O, então o X, em seguida, O, etc.",zh:"你和你的对手轮流标志着一个空点网格。第一个标志是X，然后与O，则X，然后O等",el:"Εσείς και ο αντίπαλός σας λαμβάνουν γυρίζει για να σηματοδοτήσει το πλέγμα σε ένα κενό σημείο. Το πρώτο σήμα είναι Χ, τότε O, τότε το Χ, τότε O, κ.λπ.",fr:"Vous et votre adversaire se relaient pour marquer la grille dans un endroit vide. La première marque est X, O, X, puis O, etc.",hi:"आप और अपने प्रतिद्वंद्वी को लेने के लिए एक खाली जगह में ग्रिड चिह्नित करने के लिए बदल जाता है। पहले मार्क एक्स, तो हे, तो एक्स, तो हे, आदि है",es:"Usted y su oponente se da vuelta para marcar la red en un espacio vacío. La primera marca es X, entonces O, entonces X, a continuación, S, etc."},TICTACTOE_RULES_SLIDE2:{en:"The first to mark a whole row, column or diagonal wins.",iw:"הראשון שמסמן שורה, עמודה או אלכסון מנצח",pt:"O primeiro a marcar uma linha inteira, coluna ou diagonal vitórias.",zh:"第一，以纪念一整行，列或对角线胜。",el:"Ο πρώτος για να σηματοδοτήσει μια ολόκληρη σειρά, στήλη ή διαγώνιο νίκες.",fr:"Le premier à marquer une ligne entière, colonne ou diagonale gagne.",hi:"एक पूरी पंक्ति, स्तंभ या विकर्ण जीत चिह्नित करने के लिए पहले।",es:"El primero en marcar toda una fila, columna o diagonal gana."},TICTACTOE_CLOSE:{en:"Close",iw:"סגור",pt:"Fechar",zh:"继续游戏",el:"Κοντά",fr:"Fermer",hi:"बंद करे",es:"Cerrar"}}}function e(b){log.info("Game got updateUI:",b),a.didMakeMove=!1,a.currentUpdateUI=b,g(),a.state=b.move.stateAfterMove,j()?(a.state=gameLogic.getInitialState(),n()&&i(gameLogic.createInitialMove())):a.animationEndedTimeout=$timeout(f,500)}function f(){log.info("Animation ended"),h()}function g(){a.animationEndedTimeout&&($timeout.cancel(a.animationEndedTimeout),a.animationEndedTimeout=null)}function h(){if(l()){var b=aiService.findComputerMove(a.currentUpdateUI.move);log.info("Computer move: ",b),i(b)}}function i(b){a.didMakeMove||(a.didMakeMove=!0,moveService.makeMove(b))}function j(){return!a.currentUpdateUI.move.stateAfterMove}function k(){return""===a.currentUpdateUI.playersInfo[a.currentUpdateUI.yourPlayerIndex].playerId}function l(){return n()&&k()}function m(){return n()&&!k()}function n(){return!a.didMakeMove&&a.currentUpdateUI.move.turnIndexAfterMove>=0&&a.currentUpdateUI.yourPlayerIndex===a.currentUpdateUI.move.turnIndexAfterMove}function o(b,c){if(log.info("Clicked on cell:",b,c),m()){if("?throwException"===window.location.search)throw new Error("Throwing the error because URL has '?throwException'");var d=null;try{d=gameLogic.createMove(a.state,b,c,a.currentUpdateUI.move.turnIndexAfterMove)}catch(e){return void log.info(["Cell is already full in position:",b,c])}i(d)}}function p(b,c){var d=a.state.board[b][c];return""!==d}function q(b,c){return"X"===a.state.board[b][c]}function r(b,c){return"O"===a.state.board[b][c]}function s(b,c){return a.state.delta&&a.state.delta.row===b&&a.state.delta.col===c}function t(b){return b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.isHelpModalShown=!1),!0}a.currentUpdateUI=null,a.didMakeMove=!1,a.animationEndedTimeout=null,a.state=null,a.isHelpModalShown=!1,a.init=b,a.updateUI=e,a.cellClicked=o,a.shouldShowImage=p,a.isPieceX=q,a.isPieceO=r,a.shouldSlowlyAppear=s,a.clickedOnModal=t}(game||(game={})),angular.module("myApp",["ngTouch","ui.bootstrap","gameServices"]).run(function(){$rootScope.game=game,game.init()});var aiService;!function(a){function b(a){return d(a,{millisecondsLimit:1e3})}function c(a,b){for(var c=[],d=0;d<gameLogic.ROWS;d++)for(var e=0;e<gameLogic.COLS;e++)try{c.push(gameLogic.createMove(a,d,e,b))}catch(f){}return c}function d(a,b){return alphaBetaService.alphaBetaDecision(a,a.turnIndexAfterMove,f,e,null,b)}function e(a,b){var c=a.endMatchScores;return c?c[0]>c[1]?Number.POSITIVE_INFINITY:c[0]<c[1]?Number.NEGATIVE_INFINITY:0:0}function f(a,b){return c(a.stateAfterMove,b)}a.findComputerMove=b,a.getPossibleMoves=c,a.createComputerMove=d}(aiService||(aiService={}));
//# sourceMappingURL=everything.min.js.map